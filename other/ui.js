function nn(input){ //neural network impressions(newnnfe)
    var F = {
        '0': 0.1,
        '1': 0,
        '2': 1,
        '3': 0,
        '4': 0,
        '5': 0.5509259258396924,
        '6': 0.5748722796107201,
        '7': 0.13567435747999632,
        '8': 0.301758251367604,
        '9': 0.06345791379277584,
        '10': -0.07549799774608745,
        '11': 0.2486205202330189,
        '12': 0.054335043656166815,
        '13': -0.16709400154739212,
        '14': -0.02126682194948003,
        '15': 0.24439414174589416,
        '16': 0,
        '17': 1,
        '18': 0,
        '19': 0,
        '20': 0.5509259258396924,
        '21': -0.006061424656054331,
        '22': -0.6434347182246142,
        '23': 0.03854600994180274,
        '24': 0.25384846185321397,
        '25': -3.5063699892423315,
        '26': -1.078191231719089,
        '27': 0.03595853615429371,
        '28': 0.6271209947897397,
        '29': -1.0906705274515633,
        '30': 0.4804784559768973,
        '31': -2.42758987905037,
        '32': -0.03250471470756656,
        '33': 0.18940942026797133,
        '34': 0,
        '35': 1,
        '36': 0,
        '37': 0,
        '38': 0.5509259258396924,
        '39': 0.024187121827678883,
        '40': 3.3128608011502703,
        '41': 0.6548590467750856,
        '42': 0.6039844832027802,
        '43': 0.6404671230484582,
        '44': 0.30727631663274846,
        '45': -0.07860171114682396,
        '46': 0.2823582142388174,
        '47': 0.02400552477817012,
        '48': -0.037590866175519815,
        '49': 0.08946677661861413,
        '50': 0.22601867563191186,
        '51': 0,
        '52': 1,
        '53': 0,
        '54': 0,
        '55': 0.5509259258396924,
        '56': -0.006698556359565326,
        '57': -0.7688780465190281,
        '58': 0.46065399074086333,
        '59': -0.8723172523812104,
        '60': -0.15771011282736414,
        '61': -0.11824534598929988,
        '62': 0.24845189155537994,
        '63': 0.5748722796107201,
        '64': 0.25384846185321397,
        '65': 0.6548590467750856,
        '66': 0.49920000068266607 };

    F[1] = input[0];
    F[2] = input[1];
    F[3] = input[2];
    F[4] = input[3];
    F[5] = input[4];
    F[7] = F[8];
    F[8] = F[9];
    F[8] += F[1] * F[10];
    F[8] += F[2] * F[11];
    F[8] += F[3] * F[12];
    F[8] += F[4] * F[13];
    F[8] += F[5] * F[14];
    F[6] = (1 / (1 + Math.exp(-F[8])));
    F[15] = F[6] * (1 - F[6]);
    F[16] = F[1];
    F[17] = F[2];
    F[18] = F[3];
    F[19] = F[4];
    F[20] = F[5];
    F[25] = F[26];
    F[26] = F[27];
    F[26] += F[1] * F[28];
    F[26] += F[2] * F[29];
    F[26] += F[3] * F[30];
    F[26] += F[4] * F[31];
    F[26] += F[5] * F[32];
    F[24] = (1 / (1 + Math.exp(-F[26])));
    F[33] = F[24] * (1 - F[24]);
    F[34] = F[1];
    F[35] = F[2];
    F[36] = F[3];
    F[37] = F[4];
    F[38] = F[5];
    F[42] = F[43];
    F[43] = F[44];
    F[43] += F[1] * F[45];
    F[43] += F[2] * F[46];
    F[43] += F[3] * F[47];
    F[43] += F[4] * F[48];
    F[43] += F[5] * F[49];
    F[41] = (1 / (1 + Math.exp(-F[43])));
    F[50] = F[41] * (1 - F[41]);
    F[51] = F[1];
    F[52] = F[2];
    F[53] = F[3];
    F[54] = F[4];
    F[55] = F[5];
    F[59] = F[60];
    F[60] = F[61];
    F[60] += F[6] * F[22];
    F[60] += F[24] * F[40];
    F[60] += F[41] * F[57];
    F[58] = (1 / (1 + Math.exp(-F[60])));
    F[62] = F[58] * (1 - F[58]);
    F[63] = F[6];
    F[64] = F[24];
    F[65] = F[41];
    var output = [];
    output[0] = F[58];
    return output;
}

function nn2(input){ //nn spend
       var F = {
        '0': 0.1,
        '1': 0,
        '2': 1,
        '3': 0,
        '4': 0,
        '5': 0.12962962966412306,
        '6': 0.37634886308538934,
        '7': 0.37939120036297713,
        '8': -0.5050745959922035,
        '9': -0.13440720204422799,
        '10': 0.3229455951185706,
        '11': -0.3694515025714811,
        '12': -0.18980530508462448,
        '13': 0.8868785552547377,
        '14': -0.009934607032064585,
        '15': 0.23471039633972424,
        '16': 0,
        '17': 1,
        '18': 0,
        '19': 0,
        '20': 0.12962962966412306,
        '21': -0.00035664377701268506,
        '22': 0.9322447941951234,
        '23': -0.0016299427736775063,
        '24': 0.36436751682342344,
        '25': 0.42495418154669434,
        '26': -0.5564575198019184,
        '27': -0.19335507631961768,
        '28': 0.2978226850555224,
        '29': -0.36858702293323675,
        '30': -0.03154940707619975,
        '31': 0.9839851393222973,
        '32': 0.041720313231349906,
        '33': 0.23160382950735567,
        '34': 0,
        '35': 1,
        '36': 0,
        '37': 0,
        '38': 0.12962962966412306,
        '39': -0.00037877108192781297,
        '40': 1.0033644777252382,
        '41': 0.7256921279923475,
        '42': -0.267224101419667,
        '43': 0.9728747626921381,
        '44': 0.5912568402882196,
        '45': -0.15677756660772768,
        '46': 0.3736175450814014,
        '47': 0.3982864313210414,
        '48': -1.2448160508676163,
        '49': 0.06262099981807986,
        '50': 0.19906306336228582,
        '51': 0,
        '52': 1,
        '53': 0,
        '54': 0,
        '55': 0.12962962966412306,
        '56': 0.0005809176416784931,
        '57': -1.790406004393518,
        '58': 0.3760635884918504,
        '59': 0.4536657620623039,
        '60': -0.5062902111220307,
        '61': 0.0762570827643866,
        '62': 0.23463976590248262,
        '63': 0.37634886308538934,
        '64': 0.36436751682342344,
        '65': 0.7256921279923475,
        '66': 0.3744336457181729 };
            
          
    F[1] = input[0];
    F[2] = input[1];
    F[3] = input[2];
    F[4] = input[3];
    F[5] = input[4];
    F[7] = F[8];
    F[8] = F[9];
    F[8] += F[1] * F[10];
    F[8] += F[2] * F[11];
    F[8] += F[3] * F[12];
    F[8] += F[4] * F[13];
    F[8] += F[5] * F[14];
    F[6] = (1 / (1 + Math.exp(-F[8])));
    F[15] = F[6] * (1 - F[6]);
    F[16] = F[1];
    F[17] = F[2];
    F[18] = F[3];
    F[19] = F[4];
    F[20] = F[5];
    F[25] = F[26];
    F[26] = F[27];
    F[26] += F[1] * F[28];
    F[26] += F[2] * F[29];
    F[26] += F[3] * F[30];
    F[26] += F[4] * F[31];
    F[26] += F[5] * F[32];
    F[24] = (1 / (1 + Math.exp(-F[26])));
    F[33] = F[24] * (1 - F[24]);
    F[34] = F[1];
    F[35] = F[2];
    F[36] = F[3];
    F[37] = F[4];
    F[38] = F[5];
    F[42] = F[43];
    F[43] = F[44];
    F[43] += F[1] * F[45];
    F[43] += F[2] * F[46];
    F[43] += F[3] * F[47];
    F[43] += F[4] * F[48];
    F[43] += F[5] * F[49];
    F[41] = (1 / (1 + Math.exp(-F[43])));
    F[50] = F[41] * (1 - F[41]);
    F[51] = F[1];
    F[52] = F[2];
    F[53] = F[3];
    F[54] = F[4];
    F[55] = F[5];
    F[59] = F[60];
    F[60] = F[61];
    F[60] += F[6] * F[22];
    F[60] += F[24] * F[40];
    F[60] += F[41] * F[57];
    F[58] = (1 / (1 + Math.exp(-F[60])));
    F[62] = F[58] * (1 - F[58]);
    F[63] = F[6];
    F[64] = F[24];
    F[65] = F[41];
    var output = [];
    output[0] = F[58];
    return output;  
            }

function conversion(){
    var inputvec = []; // type = desktop
    if (((document.getElementById("platform").value.length != 0) && (document.getElementById("type").value.length != 0) && (document.getElementById("time").value.length != 0))){
        if (document.getElementById("platform").value.toLowerCase() == "desktop") {
            inputvec.push(1, 0, 0);
        }
        else if (document.getElementById("platform").value.toLowerCase() == "app") { //type = app
            inputvec.push(0, 1, 0);
        }
        else if (document.getElementById("platform").value.toLowerCase() == "mobile"){
            inputvec.push(0, 0, 1);
        }
        if (document.getElementById("type").value.toLowerCase() == "video") { //type = video
            inputvec.push(1);
        }
        else if (document.getElementById("type").value.toLowerCase() == "banner") {
            inputvec.push(0);
        }
        inputvec.push(parseFloat(document.getElementById("time").value)/24); //hours
        
        var output = nn2(inputvec);
        if (document.getElementById('a').checked) {
            var output = nn(inputvec);
            var output_conv = (-5000*Math.log((1/(parseFloat(output))-1)) + 7000).toFixed(4);
            document.getElementById("pred").innerHTML = String(output_conv) + " impressions";
        }
        
        if (document.getElementById('b').checked) {
            var output = nn2(inputvec);
            var output_conv = (-50000*Math.log((1/(parseFloat(output))-1)) + 70000).toFixed(4);
            document.getElementById("pred").innerHTML = String(output_conv) + " cpm";
        }
        
        if (document.getElementById('c').checked) {
            var output1 = nn(inputvec);
            var output = nn2(inputvec);
            var output_conv = (-50000*Math.log((1/(parseFloat(output))-1)) + 70000);
            var output_conv1 = (-5000*Math.log((1/(parseFloat(output1))-1)) + 7000);
            document.getElementById("pred").innerHTML = String((output_conv1/output_conv).toFixed(4)) + " impressions/cpm";
        }
       
        
    }
    else{
        document.getElementById("pred").innerHTML = "enter valid inputs";
    }
    console.log('complete!')
    return false;

}

$(document).ready(function(){
    $('input:radio[name="display"]').change(
        function(){
            if ($(this).val() == 'a') {
                $('#video').css('background-color','green');
            }
            else if ($(this).val() == 'b'){
                $('#video').css('background-color','blue');
            }
            else{
                $('#video').css('background-color','red');
            }
        });
    $("#submit").click(conversion);
    //function(){

    //$.ajax({url: "http://localhost:3000/", success: function(result){
    //    $("#header").html(result);
    //}});
    //var inputvec = [];
    //conversion;
    //$('#pred').html("yo");
    //return false;
    //}


});